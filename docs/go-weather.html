<html><head><link rel="import" href="bower_components/polymer/polymer-element.html"><link rel="import" href="bower_components/iron-ajax/iron-ajax.html"><link rel="import" href="go-refresh-mixin.html"><script src="bower_components/highcharts/highcharts.js"></script></head><body><dom-module id="go-weather"><template><style>:host{display:block;position:relative;margin:10px;padding:10px 0;background-color:rgba(0, 0, 0, 0.5);color:white;}#chart{height:200px;}</style><iron-ajax id="ajax" url="[[_url]]" on-response="_renderChart"></iron-ajax><div id="chart"></div></template><script>class GoWeather extends RefreshMixin(Polymer.Element){static get is(){return'go-weather'}static get properties(){return{_url:{type:String,value:'https://api.worldweatheronline.com/free/v2/weather.ashx?key=4c6df087794e4d7497635723161603&format=json&q=94116'}}}connectedCallback(){super.connectedCallback(),this.refreshInterval=3.6e6,requestAnimationFrame(()=>{this._chart=new Highcharts.Chart({chart:{renderTo:this.$.chart,backgroundColor:'transparent',alignTicks:!1},title:{text:''},xAxis:[{labels:{style:{color:'#FFF'}},categories:['8 AM','11 AM','2 PM','5 PM','8 PM','11 PM'],crosshair:!0}],yAxis:[{title:{text:''},labels:{format:'{value}\xB0C',style:{color:'#FFF'}},min:0,max:30,allowDecimals:!1},{title:{text:''},labels:{enabled:!1},min:0,max:100,gridLineWidth:0,opposite:!0}],tooltip:{shared:!0,positioner:(b,c,d)=>{return{x:Math.min(d.plotX,this._chart.plotWidth-b/2),y:0}}},legend:{enabled:!1},series:[{name:'Temp',type:'spline',color:'#FFF',data:[null,null,null,null,null,null],tooltip:{valueSuffix:'\xB0C'}},{name:'Rain',type:'column',borderColor:'#4CF',color:'rgba(68, 204, 255, 0.5)',yAxis:1,data:[null,null,null,null,null,null],tooltip:{valueSuffix:'%'}}]})})}refreshImpl(){this.$.ajax.generateRequest()}_renderChart(a){var b=a.detail.response.data.weather[0].hourly.slice(2),c=b.map(e=>parseInt(e.tempC,10)),d=b.map(e=>parseInt(e.chanceofrain,10));this._chart.series[0].setData(c,!1),this._chart.series[1].setData(d)}}customElements.define(GoWeather.is,GoWeather);</script></dom-module></body></html>